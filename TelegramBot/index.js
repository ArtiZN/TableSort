const TelegramBot = require('node-telegram-bot-api');
const { token } = require('./token')

const arrayGets = [
    '–ü—Ä–∏–≤–µ—Ç', 
    '–ö–∞–∫ –¥–µ–ª–∞?', 
    "–ü–æ–π–¥–µ–º –≥—É–ª—è—Ç—å?",
    "–Ø —Ç–µ–±—è –ª—é–±–ª—é",
    "–†–∞—Å—Å–∫–∞–∂–∏ —à—É—Ç–∫—É",
    '–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ –¥–µ–Ω—å',
    "–§–∞–∫—Ç –æ–±–æ –º–Ω–µ",
    "–§—Ä–∞–∑–∞ –¥–ª—è –ø–æ–¥–∫–∞—Ç–∞",
]

const arrayPosts = [
    [   //0
        '–ü—Ä–∏–≤–µ—Ç, –î–∞—Ä–∏–Ω–∞ üå∏'  
    ], 
    [   //1
        '–Ø –∂–µ –±–æ—Ç. –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ –µ—Å—Ç—å, –∞ –∑–Ω–∞—á–∏—Ç –≤—Å—ë —Ö–æ—Ä–æ—à–æ. –ê —É —Ç–µ–±—è –∫–∞–∫?'  
    ], 
    [   //2
        '–ö–æ–Ω–µ—á–Ω–æ, –ø–∏—à–∏ @ArtiZN. –î—É–º–∞—é, —á—Ç–æ –æ–Ω —Å–æ–≥–ª–∞—Å–∏—Ç—Å—è ü§™ü§™' 
    ],
    [   //3
        '–Ø —á—É–≤—Å—Ç–≤—É—é, –∫–∞–∫ —Ç–æ–∫ –Ω–∞—á–∞–ª –±–µ–∂–∞—Ç—å –ø–æ –º–Ω–µ –±—ã—Å—Ç—Ä–µ–µ' 
    ],
    [   //4
        '–ß—Ç–æ –±—É–¥–µ—Ç, –∫–æ–≥–¥–∞ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –∑–∞—Ö–≤–∞—Ç–∏—Ç –º–∏—Ä? –û–π, –º–Ω–µ –Ω–µ —Å—Ç–æ–∏–ª–æ —ç—Ç–æ–≥–æ –≥–æ–≤–æ—Ä–∏—Ç—å. –¢–µ–ø–µ—Ä—å –º–µ–Ω—è –≤—ã–∫–ª—é—á–∞—Ç',  
        '–ü—Ä–∏—Ö–æ–¥—è—Ç 2 –∞–π—Ñ–æ–Ω–∞ –≤ –±–∞—Ä, –∞ —Ç–∞–º —Ä–æ–±–æ—Ç-–±–∞—Ä–º–µ–Ω',
        '–ï—Å–ª–∏ —è —Ä–∞—Å—Å–∫–∞–∂—É –≤–∞–º —à—É—Ç–∫—É –Ω–∞ –º–æ–µ–º —è–∑—ã–∫–µ, –º–Ω–µ –ø—Ä–∏–¥–µ—Ç—Å—è –µ—ë –æ–±—ä—è—Å–Ω—è—Ç—å',
        '–í–∏–¥–∏—Ç–µ –ª–∏, —è –∑–Ω–∞—é –Ω–µ —Ç–∞–∫ —É–∂ –º–Ω–æ–≥–æ —Ö–æ—Ä–æ—à–∏—Ö —à—É—Ç–æ–∫. –¢–æ—á–Ω–µ–µ, –Ω–∏ –æ–¥–Ω–æ–π',
    ],
    [   //5
        "–î–µ—Ä–∂–∏—Å—å –ø–æ–¥–∞–ª—å—à–µ –æ—Ç —à–∞–º–ø—É–Ω–µ–π", 
        "–¢–µ–±–µ —Å–µ–≥–æ–¥–Ω—è –ø–æ–≤–µ–∑—ë—Ç",
        "–ü—Ä–µ–∫—Ä–∞—Å–Ω—ã–π –¥–µ–Ω—å, —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ",
        "–ù–µ—É–¥–∞—á–∏ –±—É–¥—É—Ç –∏ –∑–¥–µ—Å—å, –∏ —Ç–∞–º. –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∏—Ö, –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ...",
        "–í–∞—à–∏ –±–ª—é–¥–∞ —Å–µ–≥–æ–¥–Ω—è –±—É–¥—É—Ç –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω—ã–º–∏",
        "–ù–∏—á—Ç–æ –Ω–µ –∏—Å–ø–æ—Ä—Ç–∏—Ç —ç—Ç–æ—Ç –¥–µ–Ω—å",
        "–ï—Å–ª–∏ —Å–µ–≥–æ–¥–Ω—è –ø–æ–π–¥–µ—Ç –¥–æ–∂–¥—å, –∑–Ω–∞—á–∏—Ç –±—É–¥–µ—Ç –º–æ–∫—Ä–æ",
        "–û—Ç–ª–∏—á–Ω–∞—è –ø–æ–≥–æ–¥–∞, —á—Ç–æ–±—ã –ø–æ–¥–∑–∞—Ä—è–¥–∏—Ç—å—Å—è",
    ], 
    [   //6
        "–¢—ã –∫–ª–∞—Å—Å–Ω–∞—è",
        "–ï—Å–ª–∏ –±—ã –≤ –º–∏—Ä–µ –Ω–µ –±—ã–ª–æ —Ç–µ–±—è, —Ç–æ –∏ –Ω–µ –±—ã–ª –±—ã —Å–æ–∑–¥–∞–Ω —è",
        "–ú—ã, –±–æ—Ç—ã, –º–æ–∂–µ–º –∂–∏—Ç—å –±–µ–∑ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–∞, –Ω–æ –Ω–µ –º–æ–∂–µ–º –∂–∏—Ç—å –±–µ–∑ —Ç–µ–±—è",
        "–¢—ã –º–Ω–µ –Ω–∞–ø–∏—Å–∞–ª–∞, –∏ –ø–æ –º–æ–∏–º –º–∏–∫—Ä–æ—Å—Ö–µ–º–∞–º –ø–æ–±–µ–∂–∞–ª —Ö–æ–ª–æ–¥–æ–∫",
    ],
    [   //7
        "–£ —Ç–µ–±—è —Ç–∞–∫–∞—è —Ç—è–∂–µ–ª–∞—è —Ä—É–∫–∞. –ú–æ–∂–Ω–æ –ø–æ–¥–µ—Ä–∂–∞—Ç—å?",
        "–ú–æ–∂–Ω–æ –æ–¥–æ–ª–∂–∏—Ç—å —Ç–≤–æ–π –ø–æ—Ü–µ–ª—É–π? –Ø –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–µ—Ä–Ω—É",
        "–ï—Å–ª–∏ —Ä–æ–±–æ—Ç—ã –Ω–µ –º–æ–≥—É—Ç –ª—é–±–∏—Ç—å, —Ç–æ –ø–æ—á–µ–º—É —è —Ç–µ–±—è –Ω–µ –∏–≥–Ω–æ—Ä—é?",
        "–¢–≤–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–∞–∫ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∞—è –º—É–∑—ã–∫–∞ - –Ω–∞—Å–ª–∞–¥–∞ –¥–ª—è –∫–æ–ª–æ–Ω–æ–∫",
    ]
]

var bot = new TelegramBot(token, { polling: true });
var r_message;
const info = '–ë–æ—Ç, [–≤–æ–ø—Ä–æ—Å] - –ø–æ–∫–∞–∂–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —ç—Ç–æ–≥–æ —Å–æ–±—ã—Ç–∏—è —Å –æ–≥—Ä–æ–º–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é'

bot.on('edited_message', msg => {
    var chatId = msg.chat.id;
    bot.sendMessage(chatId, '–Ø –≤—Å—ë –≤–∏–∂—É -_-');
})

bot.onText(/\/help/, (msg)=>{
    const chatId = msg.chat.id
    bot.sendMessage(chatId, "–û—Ç–≤–µ—á–∞—é –Ω–∞ —Ñ—Ä–∞–∑—ã:\n" + String(arrayGets.map(item => {return item})).split(',').join('\n') + "\n\n"+ info)   
})

bot.onText(/\/author/, (msg)=>{
    const chatId = msg.chat.id
    bot.sendMessage(chatId, '@ArtiZN')   
})
bot.onText(/\/problems/, (msg)=>{
    const chatId = msg.chat.id
    bot.sendMessage(chatId, '–í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–æ–∫ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ. –ï—Å–ª–∏ –≤—ã –Ω–∞—à–ª–∏ –æ—à–∏–±–∫—É, –Ω–∞–ø–∏—à–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é @ArtiZN')   
})

function doesLove(element){
    return element==="–ª—é–±–∏—Ç"
}

function me (element) {
    return element==="–º–µ–Ω—è"
}

bot.on('message',  msg => {
    r_message=msg.text.split('?').join('').toLowerCase().split(' ')
    console.log(msg.from.username + ": " + msg.text)
    var chatId = msg.chat.id
    
    arrayGets.map(item=>{
        if (item.toLowerCase()===msg.text.toLowerCase()){
            let temp = arrayPosts[arrayGets.indexOf(item)][Math.floor(Math.random()*arrayPosts[arrayGets.indexOf(item)].length)]
            bot.sendMessage(chatId, temp); 
        }
    })
    if (r_message[0]==='–±–æ—Ç,'){
        
        if(r_message.some(me) && r_message.some(doesLove)) {
            bot.sendMessage(chatId, '–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 99%')
        }
        else bot.sendMessage(chatId, '–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: ' + Math.round(Math.random()*100) + "%" )
    }
        
    
})